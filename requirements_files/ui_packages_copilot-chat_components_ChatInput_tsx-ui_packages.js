"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_copilot-chat_components_ChatInput_tsx-ui_packages_copilot-chat_components_LegalDi-cbec1d"],{69425:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(96540);function i(e){let[t,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=e.current,r=t?.lastElementChild;if(!r)return;let i=new IntersectionObserver(([e])=>n(e?.isIntersecting??!0),{root:t,threshold:1});return i.observe(r),()=>i.disconnect()}),t}},41980:(e,t,n)=>{n.d(t,{U:()=>c});var r=n(62562),i=n(10833),a=n(96540),s=n(18312),o=n(65615),l=n(7426);function c(e,t,n,c,u,m){let{topRepositoriesCache:p}=(0,o.Pk)(),h=(0,l.b)(),[f,g]=(0,a.useState)([]),[x,y]=(0,a.useState)(!p),v=(0,a.useRef)(void 0),w=(0,s.useRelayEnvironment)(),j=(0,s.useFragment)(i.Sy,t??null);if(j&&!p&&!e){let{topRepositories:e}=j,t=d((e.edges||[]).flatMap(e=>e?.node?[(0,s.readInlineData)(i.R6,e.node)]:[])),{ownerLogin:r,name:a}=u??{};u&&!t.find(e=>`${e.ownerLogin}/${e.name}`==`${r}/${a}`)&&t.splice(0,0,{databaseId:u.id,isInOrganization:"Organization"===u.ownerType,name:u.name,nwo:`${u.ownerLogin}/${u.name}`,ownerLogin:u.ownerLogin,ownerAvatarUrl:`/${u.ownerLogin}.png?s=40`}),setTimeout(()=>h.setTopRepositoryTopics(t),10),y(!1),n(void 0)}let b=(0,a.useCallback)(async()=>{try{let e=await (0,s.fetchQuery)(w,i.m,{topRepositoriesFirst:m}).toPromise();n(e?.viewer)}catch{}finally{y(!1)}},[w,n,m]);return((0,a.useEffect)(()=>{c&&b()},[b,c]),(0,a.useEffect)(()=>{let t=async e=>{y(!0);let t=((await new Promise((t,n)=>{(0,s.fetchQuery)(w,i.XD,{searchQuery:(0,r.J)(e)}).subscribe({start:e=>{v.current?.unsubscribe(),v.current=e},next:e=>{t(e)},error:e=>{n(e)}})})).search.nodes||[]).flatMap(e=>e?[(0,s.readInlineData)(i.R6,e)]:[]);g(t.length?d(t):[]),y(!1)};e?t(e):p&&g(p)},[e,w,p]),p&&!e)?{repositories:p,loading:!1}:{repositories:f,loading:x}}function d(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:i})=>({databaseId:i??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},21057:(e,t,n)=>{n.d(t,{JE:()=>m,Z3:()=>u,bn:()=>d,kw:()=>p});var r=n(97286),i=n(80758),a=n(96540),s=n(82610),o=n(65615),l=n(7426),c=n(68956);let d="https://github.com/marketplace?type=apps&copilot_app=true",u="@agent:";function m(e=!0){let t=(0,o.Pk)(),n=(0,l.b)(),i=(0,c.iI)(),d=n.getSelectedThread(t)?.customCopilotID,u=!!(i||d),{model:p,messages:h,agentsPath:f}=t,g=p?.hasLimitedCapabilities,x=(0,a.useCallback)(e=>{if(g||u)return{agents:[],showLimit:!1};let t=(0,s.Q7)(h)[0];return t?{agents:e.filter(e=>e.slug===t.name),showLimit:!0}:{agents:e,showLimit:!1}},[u,h,g]),{isLoading:y,data:v,refetch:w,isStale:j,isFetched:b}=(0,r.I)({queryKey:["copilot-chat","agents",f],queryFn:()=>f?n.fetchAgents(f):[],select:x,enabled:e&&!g&&!u}),I=async()=>!b||j?(await w()).data:v;return{loading:y,disabled:g,availableAgents:v?.agents,showLimit:v?.showLimit??!1,imperativelyFetch:I}}function p({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,a.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${u}${e}`;n(r,[0,0],r.length)},[n,t])}},1750:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},10967:(e,t,n)=>{n.d(t,{Ld:()=>h,M8:()=>g,Tz:()=>v,U2:()=>f,W5:()=>d,cx:()=>p,r_:()=>y,vn:()=>x,xG:()=>u});var r=n(97665),i=n(40458),a=n(94747),s=n(97286),o=n(57572),l=n(96540),c=n(37937);n(65615),n(7426);let d={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},u={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},m=[u.NotFound,u.Unauthorized,u.ServiceUnavailable,u.QuotaExhausted,u.Forbidden,u.RequestFailed],p=256,h=400;function f(e,t,n){let r=(0,l.useRef)(void 0),i=(0,l.useRef)(void 0),a=(0,l.useRef)([]),s=(0,l.useRef)(!1),[o,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0),m=(0,l.useCallback)(()=>{c([]),u(!1)},[]),p=(0,l.useCallback)(()=>{if(n&&e)try{let e=new Worker(n);e.onmessage=({data:e})=>{s.current=!1,c(e.list),u(!1),i.current=e.query,a.current=e.list},r.current=e}catch(e){console.warn("Web workers are not available: ",e)}},[n,e]),h=(0,l.useCallback)(t=>{s.current&&(r.current?.terminate(),p());let n=i.current&&t.startsWith(i.current)&&a.current.length;u(!0),s.current=!0,r.current?.postMessage({baseList:n?a.current:e,query:t})},[e,p]);return((0,l.useEffect)(()=>(p(),()=>r.current?.terminate()),[p]),(0,l.useEffect)(()=>{h(t)},[t,h]),n)?[o,d,m]:[[],!1,()=>{}]}function g(e){var t,n;let s=(0,r.jE)(),o=(0,l.useCallback)(()=>Promise.all(e.map(e=>s.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),[s,e]),c=(0,i.E)({queries:e.map(e=>({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:u.Unknown,code:d.Unknown,docs:d.Unknown},staleTime:1/0}))}),{mutate:p}=(0,a.n)({mutationKey:["repos-indexing-state"],mutationFn:()=>j(e),onSuccess:o}),h={requestStatus:0===(n=(t=c.map(e=>e.data)).map(e=>e.requestStatus)).length?u.Unknown:n.some(e=>m.includes(e))?u.IndexingError:n.every(e=>e===u.CanIndex)?u.CanIndex:(n.every(e=>e===u.Unknown),u.Unknown),code:I(t.map(e=>e.code)),docs:I(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens};return R(()=>void o(),h.code===d.Indexing&&h.requestStatus!==u.IndexingError?1e4:0),[h,()=>p()]}function x(e){let t=(0,r.jE)(),n=(0,l.useCallback)(()=>Promise.resolve(t.invalidateQueries({queryKey:["repo-indexing-state",e]})),[t,e]),i=(0,s.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:u.Unknown,code:d.Unknown,docs:d.Unknown},staleTime:1/0}),{mutate:o}=(0,a.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>j([e]),onSuccess:n}),c=i.data;return R(()=>void n(),c.code===d.Indexing&&c.requestStatus!==u.IndexingError?1e4:0),[c,()=>o()]}function y(e){let t=(0,s.I)({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>b(e),staleTime:1/0});return!t.isError&&!!t.data?.canChat}function v(){let e=c.J.getPanelHeight(),t=c.J.getPanelWidth(),n=(0,l.useRef)(null),r=(0,l.useRef)(e),i=(0,l.useRef)(e),a=(0,l.useRef)(null),s=(0,l.useRef)(t),o=(0,l.useRef)(t),[d,u]=(0,l.useState)(e),[m,f]=(0,l.useState)(t),g=(0,l.useRef)(0);(0,l.useEffect)(()=>{g.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let x=e=>Math.min(Math.max(e,p),window.innerHeight-g.current),y=e=>Math.min(Math.max(e,h),window.innerWidth-2*g.current),v=(0,l.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,a=x(r.current+t);u(a),i.current=a}if(null!==a.current){let t=a.current-e.clientX,n=y(s.current+t);f(n),o.current=n}},[]),w=(0,l.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",w),null!==n.current&&(c.J.setPanelHeight(i.current),n.current=null),null!==a.current&&(c.J.setPanelWidth(o.current),a.current=null)},[v]),j=(0,l.useCallback)((e,t,i)=>{0===e.button&&(e.preventDefault(),i&&(n.current=e.clientY,r.current=d),t&&(a.current=e.clientX,s.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",w))},[d,m,v,w]),b=(0,l.useCallback)(e=>{if("ArrowUp"===e.key){let t=x(d+4);u(t),c.J.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=x(d-4);u(t),c.J.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=y(m-4);f(t),c.J.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=y(m+4);f(t),c.J.setPanelWidth(t),e.preventDefault()}},[d,m]);return{panelWidth:m,panelHeight:d,startResize:j,onResizerKeyDown:b}}async function w(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)return{requestStatus:u.RequestFailed,code:d.Unknown,docs:d.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function j(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,o.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function b(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});return t.ok?await t.json():{canChat:!1}}function I(e){return e.every(e=>e===d.Indexed)?d.Indexed:e.every(e=>e===d.Unindexed)?d.Unindexed:e.some(e=>e===d.Indexing)?d.Indexing:e.some(e=>e===d.Unindexed)?d.PartiallyIndexed:d.Unknown}function R(e,t){let n=(0,l.useRef)(void 0),r=(0,l.useRef)(e);return(0,l.useEffect)(()=>{r.current=e},[e]),(0,l.useEffect)(()=>{if(t>0)return n.current=window.setInterval(()=>r.current(),t),()=>window.clearInterval(n.current)},[t]),n}},39046:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(46988),i=n(2622),a=n(5271),s=n(31747);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAttachmentLimit(){return 1}static getAttachmentSizeLimit(){return i.W.dotcomChatFileUpload?384e4:512e3}static makeImageReference(e,t){let n;let r=crypto.randomUUID();return i.W.dotcomChatFileUpload&&(n=new s.N(r,e,t)),n||(n=new s.J(r,e)),{id:r,attachment:n,type:"image",name:e.name||"Image"}}static getFileExtensions(e){let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>l.includes(e)):[]}async addImageAttachment(e,t="unknown"){let n=this.state.selectedThreadID;if(!n&&i.W.dotcomChatFileUpload)try{n=(await this.manager.createThread()).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}if(this.state.currentReferences.find(e=>"image"===e.type)){this.manager.addAmbientError("Only one image can be uploaded at a time"),(0,a.d)("file_limit_reached");return}if(("menu"===t||"unknown"===t)&&!CopilotImageAttacher.isTypeAllowed(e.type,this.state.model)){(0,a.d)("included_unsupported_file",{fileTypes:e.type,uploadType:t});return}let s=i.W.dotcomChatFileUpload,o=`Only images below ${s?"3.75MB":"500KB"} are supported${s?"":" during this preview period"}`;if(e.size>CopilotImageAttacher.getAttachmentSizeLimit()){this.manager.addAmbientError(o),(0,a.d)("size_limit_exceeded",{size:e.size});return}if(null==n)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let l=CopilotImageAttacher.makeImageReference(e,n);await this.autocomplete.addToReferences(l,this.state);try{await l.attachment.prefetch()}catch(e){if("string"==typeof e)this.manager.addAmbientError("An error occurred uploading the attachment"),(0,a.d)("ErrorString",{message:e});else if(e instanceof Error){if((0,a.d)(e.name,{message:e.message}),"FileSizeError"===e.name)this.manager.addAmbientError(o);else throw this.manager.addAmbientError("An unexpected error occurred while reading the file"),this.manager.removeReference(l),e}this.manager.removeReference(l);return}this.manager.setImageAttachmentUploaded(l.id,l.attachment),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t})}constructor(e,t,n){o(this,"state",void 0),o(this,"manager",void 0),o(this,"autocomplete",void 0),this.state=e,this.manager=t,this.autocomplete=n}}},68956:(e,t,n)=>{n.d(t,{Cb:()=>m,VR:()=>p,YO:()=>u,hH:()=>f,iI:()=>x,k1:()=>h,rj:()=>d});var r=n(97286),i=n(47584),a=n(96540),s=n(82610),o=n(2622),l=n(65615),c=n(7426);function d(e=!0){let{model:t,messages:n}=(0,l.Pk)(),i=(0,c.b)(),u=o.W.customCopilots,m=t?.hasLimitedCapabilities,p=(0,a.useCallback)(e=>{if(!u||m)return{copilots:[],showLimit:!1};let t=(0,s.Q7)(n)[0];return t?{copilots:e.filter(e=>e.slugWithOwner===t.name),showLimit:!0}:{copilots:e,showLimit:!1}},[u,n,m]),{isLoading:h,data:f,refetch:g,isStale:x,isFetched:y}=(0,r.I)({queryKey:["copilot-chat","custom-copilots"],queryFn:()=>i.fetchCustomCopilots(),select:p,enabled:e}),v=(0,a.useCallback)(async()=>!y||x?(await g()).data:f,[f,y,x,g]);return{loading:h,disabled:m,availableCopilots:f?.copilots,showLimit:f?.showLimit,imperativelyFetch:v}}function u(e){return!!o.W.customCopilots&&"slugWithOwner"in e}function m(e){return`${s.VR}/${e}`}function p(){let e=i.fV?.pathname;return e===s.VR||e===`${s.VR}/`}function h(){let e=RegExp(`^${s.VR}/[a-zA-Z0-9]+$`);return!!i.fV?.pathname?.match(e)}function f(){return p()||h()}let g=/\/copilot\/spaces\/([^/]+)/;function x(){let e=i.fV.pathname;return(0,a.useMemo)(()=>{let t=e.match(g);if(!t)return null;let[,n]=t;return parseInt(n??"",10)??null},[e])}},62562:(e,t,n)=>{n.d(t,{J:()=>r});function r(e){let t=e.indexOf("/");if(-1===t||0===t)return`${e} in:name archived:false`;let n=e.slice(0,t),r=e.slice(t+1);return 0===r.length?`org:${n} in:name archived:false`:`org:${n} ${r} in:name archived:false`}},41720:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(94232);function i(e){let t=e.join(","),[n]=(0,r.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},48093:(e,t,n)=>{let r;n.d(t,{V:()=>eX});var i,a=n(74848),s=n(46988),o=n(40458),l=n(53949),c=n(11499),d=n(57572),u=n(38621),m=n(34164),p=n(96540),h=n(96558),f=n(82610),g=n(2622),x=n(39046),y=n(5271),v=n(33492),w=n(65615),j=n(7426),b=n(41720),I=n(38568),R=n(47767),C=n(37937);let S=({manager:e})=>[{label:"Delete conversation",command:"delete",icon:u.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=e.getSelectedThread(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:u.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=e.getSelectedThread(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:u.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}],N=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=S({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let i=r[0],a=e.substring(i.command.length).trim();return await i.action(a,t),!0};var A=n(68956);function _(e){return(0,A.YO)(e)?e.slugWithOwner:e.slug}var k=n(89323),E=n(8338),T=n(21057),L=n(62456);function D({onSelectPanel:e,onSelectAgent:t}){let{availableAgents:n,showLimit:r,disabled:i,loading:o}=(0,T.JE)(),l=n&&n.length>0;return o?(0,a.jsxs)(E.l.Item,{disabled:!0,children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.MentionIcon,{})}),"Extension"]}):i?(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),e("agents-not-supported")},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.MentionIcon,{})}),"Extension\u2026"]}):l?(0,a.jsxs)(k.W,{children:[(0,a.jsx)(k.W.Anchor,{children:(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.MentionIcon,{})}),"Extension"]})}),(0,a.jsx)(k.W.Overlay,{width:"small",children:(0,a.jsxs)(E.l,{children:[n.map(e=>(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),t(e)},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(L.r,{src:e.avatarUrl})}),e.name,(0,a.jsxs)(E.l.Description,{variant:"inline",truncate:!0,children:[T.Z3,e.slug]}),r&&(0,a.jsx)(E.l.Description,{variant:"block",children:"You're limited to one agent per thread."})]},e.slug)),(0,a.jsx)(E.l.Divider,{}),(0,a.jsxs)(E.l.LinkItem,{href:T.bn,onClick:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.TelescopeIcon,{})}),"Marketplace",(0,a.jsx)(E.l.TrailingVisual,{children:(0,a.jsx)(u.LinkExternalIcon,{})})]})]})})]}):(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),e("no-agents-available")},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.MentionIcon,{})}),"Extension\u2026"]})}try{D.displayName||(D.displayName="AgentMenu")}catch{}var M=n(75177),P=n(55847),O=n(34614),B=n(74144),F=n(27297);function U({onClose:e}){let t=g.W.customCopilots;return(0,a.jsx)(B.l,{width:"large",title:t?"Copilots and extensions":"Extensions",position:{narrow:"fullscreen",regular:"center"},onClose:e,renderBody:()=>(0,a.jsx)(M.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",px:4,py:8,flex:1,height:"100%"},children:(0,a.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,a.jsx)(u.TelescopeIcon,{size:24}),(0,a.jsx)(M.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:"Chat with your favorite tools and services"}),(0,a.jsx)(M.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,a.jsx)(P.Q,{as:"a",href:T.bn,children:"Browse marketplace"}),(0,a.jsx)(M.A,{sx:{mt:2},children:(0,a.jsx)(O.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})})}function $({onClose:e}){let t=(0,j.b)(),n=g.W.customCopilots;return(0,a.jsx)(B.l,{width:"large",title:n?"Copilots and Extensions":"Extensions",position:{narrow:"fullscreen",regular:"center"},onClose:e,renderBody:()=>(0,a.jsx)(M.A,{sx:{display:"flex",flexDirection:"column",textAlign:"center",px:4,py:10,height:"100%",alignItems:"center",justifyContent:"center"},children:(0,a.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,color:"fg.muted"},children:[(0,a.jsx)(M.A,{sx:{display:"flex",color:"attention.fg"},children:(0,a.jsx)(u.AlertIcon,{size:24})}),(0,a.jsxs)(M.A,{as:"h3",sx:{fontSize:2,fontWeight:"bold",mt:2,color:"fg.default"},children:[n?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,a.jsxs)(M.A,{as:"p",sx:{fontSize:1,fontWeight:"normal"},children:["Switch back to the ",F.UB.displayName," model or start a new conversation"]}),(0,a.jsx)(P.Q,{onClick:()=>{t.selectThread(null),t.selectModel(F.UB)},children:"New conversation"})]})})})}try{U.displayName||(U.displayName="NoAgentsAvailableDialog")}catch{}try{$.displayName||($.displayName="AgentsNotSupportedDialog")}catch{}var W=n(80688),q=n(87330),z=n(85349),V=n(84217),H=n(52464),K=n(30631),G=n(30729),X=n(61597),J=n(40961),Z=n(10967);let Q={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--NqDvF",ActionList_Description:"KnowledgeSelectPanel-module__ActionList_Description--CM7xN"},Y=(0,p.forwardRef)(function({open:e,setOpen:t,...n},r){return(0,a.jsx)(q.K,{ref:r,"aria-expanded":!!e||void 0,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:u.BookIcon,onClick:()=>t(!e),sx:{color:"fg.muted"},variant:"invisible",...n})});function ee({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,submitReturnFocusRef:i,cancelReturnFocusRef:s}){let o=(0,w.Pk)(),c=(0,j.b)(),d=(0,v.c)(),u=(0,W.A)("localStorage"),{knowledgeBases:m}=o,[h,x]=(0,p.useState)([]),[y,b]=(0,p.useState)(!0),[I,R]=(0,p.useState)(""),S=(0,p.useRef)(null),N=u.getItem("lastUsedKnowledgeBaseId")||"",A=u.getItem("lastUsedKnowledgeBaseOrg")||"";(0,p.useEffect)(()=>{n||R("")},[n]);let _=(0,p.useMemo)(()=>""===I?m:m.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())),[I,m]),k=(0,p.useMemo)(()=>_.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[_]),[T,L]=(0,p.useState)(!1),D=y||"pending"===o.knowledgeBasesLoading.state,M=T||"error"===o.knowledgeBasesLoading.state;(0,p.useEffect)(()=>{let e=async()=>{b(!0),await c.fetchKnowledgeBases();let e=await c.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?x(e.payload||[]):L(!0),b(!1)};n&&e()},[n]);let P=(0,p.useCallback)(e=>{"DIALOG"===e.target.tagName&&r(!1)},[r]);(0,p.useEffect)(()=>(document.addEventListener("click",P),()=>{document.removeEventListener("click",P)}),[P]),(0,p.useEffect)(()=>{if(n&&S.current){let e=S.current.querySelector("input[type=text]");e?.focus()}},[n]);let{currentReferences:O}=o,B=es(),F=e=>{c.dismissAttachKnowledgeBaseHerePopover(),c.clearCurrentReferences(["image","issue"]),c.clearCurrentTopic(),o.selectedThreadID&&C.J.setSelectedTopic(o.selectedThreadID,null);let t=(0,f.UU)(e);d.addToReferences(t,o),u.setItem("lastUsedKnowledgeBaseId",e.id),u.setItem("lastUsedKnowledgeBaseOrg",e.ownerLogin)},U=(e,t)=>e.id===N?-1:t.id===N?1:0,$=e=>{let t=o.currentReferences.find(t=>(0,f.P)(t)&&t.id===e.id);if(t){c.removeReference(t);return}c.addReference((0,f.UU)(e),"docsetMenu")};return o.model?.hasLimitedCapabilities?(0,a.jsx)(el,{open:n,setOpen:r,...e}):D||0!==m.length?(0,a.jsx)("div",{ref:S,...(0,l.G)("knowledge-select-panel"),children:(0,a.jsxs)(X.X,{description:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,J.flushSync)(()=>r(!1)),s.current?.focus()},onSubmit:()=>{(0,J.flushSync)(()=>r(!1)),i.current?.focus()},open:n,selectionVariant:g.W.topicsAsReferences?"multiple":"instant",title:g.W.topicsAsReferences?"Select knowledge bases":"Select a knowledge base",variant:"modal",width:"large",maxHeight:"xlarge",children:[(0,a.jsx)(X.X.Header,{children:(0,a.jsx)(X.X.SearchInput,{onChange:e=>{R(e.currentTarget.value)},placeholder:"Search knowledge bases","aria-label":"Search knowledge bases"})}),(0,a.jsx)(E.l,{sx:{minHeight:340},children:D?(0,a.jsx)(X.X.Loading,{children:"Fetching knowledge bases\u2026"}):M?(0,a.jsx)(X.X.Message,{variant:"error",children:"Failed to load knowledge bases"}):0===k.length?(0,a.jsx)(X.X.Message,{variant:"empty",title:"No knowledge bases found",children:"Try a different search term"}):[...k].sort((e,t)=>e.org===A?-1:t.org===A?1:0).map(e=>(0,a.jsxs)(E.l.Group,{children:[(0,a.jsx)(E.l.GroupHeading,{children:e.org}),[...e.docsets].sort(U).map(e=>(0,a.jsx)(ei,{docset:e,selected:O.some(t=>(0,f.P)(t)&&t.id===e.id),onSelect:()=>g.W.topicsAsReferences?$(e):F(e)},e.id))]},e.org))}),B&&(0,a.jsx)(X.X.Footer,{children:(0,a.jsx)(ea,{message:B})})]})}):(0,a.jsx)(et,{administratedCopilotEnterpriseOrganizations:h,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:o.mode,...t})}function et({administratedCopilotEnterpriseOrganizations:e,anchorRef:t,open:n,setOpen:r}){let i=es(),s=t?{anchorRef:t,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,a.jsx)(Y,{open:n,setOpen:r,...e})},o=e?.length===0;return(0,a.jsx)(z.T,{open:n,onOpen:()=>r(!0),onClose:()=>r(!1),overlayProps:{anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},...s,children:(0,a.jsxs)(M.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:{display:"flex",flexDirection:"column",...o?{height:"100%"}:{}},...(0,l.G)("empty-knowledge-base-picker"),children:[(0,a.jsx)(M.A,{sx:{borderBottom:"1px solid",borderColor:"border.muted"},children:(0,a.jsxs)(M.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:2,px:3},children:[(0,a.jsx)(V.A,{id:"knowledge-base-dialog-title",as:"h4",sx:{fontSize:1},children:"Attach a knowledge base"}),(0,a.jsx)(q.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:u.XIcon,variant:"invisible",onClick:()=>r(!1)})]})}),(0,a.jsxs)(M.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,pt:3,...o?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{}},children:[(0,a.jsx)(G.A,{icon:u.BookIcon,size:"medium",sx:{color:"fg.muted"}}),(0,a.jsxs)(M.A,{sx:{gap:2,display:"flex",alignItems:"center",flexDirection:"column",...o?{maxHeight:"100%"}:{}},children:[(0,a.jsx)(H.A,{sx:{fontSize:1,fontWeight:600},children:"You don't have any knowledge bases"}),(0,a.jsxs)(M.A,{sx:{color:"fg.muted",textAlign:"center",fontSize:0,px:3},children:[(0,a.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),o&&(0,a.jsx)(H.A,{as:"p",sx:{mt:3,mb:4},...(0,l.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."})]}),e.length>0&&(0,a.jsx)(en,{administratedCopilotEnterpriseOrganizations:e})]})]}),i&&(0,a.jsx)(M.A,{sx:{borderTop:"1px solid",borderColor:"border.muted",px:2,py:3},children:(0,a.jsx)(ea,{message:i})})]})})}function en({administratedCopilotEnterpriseOrganizations:e}){return 1===e.length?(0,a.jsx)(P.Q,{as:"a",href:eo(e[0]),sx:{mb:4},...(0,l.G)("create-knowledge-base-button"),children:"Create a knowledge base"}):(0,a.jsxs)(M.A,{sx:{width:"100%",textAlign:"left",borderTop:"1px solid",borderColor:"border.muted",pt:3},...(0,l.G)("create-knowledge-base-dropdown"),children:[(0,a.jsx)(V.A,{as:"h3",sx:{fontSize:0,color:"fg.muted",pl:3},children:"Create a knowledge base for an organization"}),(0,a.jsx)(E.l,{sx:{maxHeight:"160px",overflow:"scroll"},children:e.map(e=>(0,a.jsx)(er,{org:e},e.id))})]})}function er({org:e}){return(0,a.jsx)(E.l.Item,{children:(0,a.jsxs)(O.A,{sx:{flex:1,color:"fg.default"},href:eo(e),children:[(0,a.jsx)(L.r,{square:!0,src:e.avatarUrl,alt:e.login,sx:{mr:2},"aria-hidden":"true"}),(0,a.jsx)(K.A,{inline:!0,title:e.login,sx:{minWidth:"80%"},children:e.login})]})})}function ei({docset:e,selected:t,onSelect:n}){let r=e.sourceRepos?.map(e=>e.id)||[],i=(0,Z.r_)(r);return(0,a.jsxs)(E.l.Item,{onSelect:()=>n(),selected:t,disabled:!i,children:[e.name,(0,a.jsx)(E.l.Description,{variant:"block",className:Q.ActionList_Description,children:e.description})]},e.id)}function ea({message:e}){return e?(0,a.jsx)(M.A,{"data-testid":"knowledge-select-panel-sso",sx:{color:"fg.muted",fontSize:0,ml:2},children:e}):null}function es(){let e=(0,w.Pk)(),t=e.ssoOrganizations.map(e=>e.login);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;{let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eo(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function el({anchorRef:e,open:t,setOpen:n}){let r=e?{anchorRef:e,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,a.jsx)(Y,{open:t,setOpen:n,...e})};return(0,a.jsx)(z.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),...r,children:(0,a.jsxs)("div",{className:(0,m.$)("m-3 d-flex flex-column flex-items-center text-center",Q.disabledForPreviewModelsPanel),children:[(0,a.jsx)(u.AlertIcon,{className:"fgColor-attention mb-3"}),(0,a.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,a.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]})})}try{Y.displayName||(Y.displayName="KBIconButton")}catch{}try{(i=KBIconButtonInner).displayName||(i.displayName="KBIconButtonInner")}catch{}try{ee.displayName||(ee.displayName="KnowledgeSelectPanel")}catch{}try{et.displayName||(et.displayName="EmptyKnowledgeBase")}catch{}try{en.displayName||(en.displayName="CreateKnowledgeBaseButton")}catch{}try{er.displayName||(er.displayName="CreateKnowledgeBaseActionRow")}catch{}try{ei.displayName||(ei.displayName="KnowledgeBaseSelectRow")}catch{}try{ea.displayName||(ea.displayName="SSOFooter")}catch{}try{el.displayName||(el.displayName="DisabledForPreviewModels")}catch{}var ec=n(89401),ed=n(70170),eu=n(97286),em=n(1750);let ep={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--ZB4TR",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--WR2cM",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--D5U0G"};var eh=n(61818);let ef=e=>`Choose items from ${e} to chat about. Use fewer references for more accurate responses.`,eg="Search",ex=({open:e,onOpenChange:t,...n})=>{let{currentTopic:r}=(0,w.Pk)();return(0,f.Z6)(r)?(0,a.jsx)(ev,{...n,open:e,onOpenChange:t,sourceRepository:r}):(0,a.jsx)(ew,{open:e,setOpen:t})},ey=({open:e,onOpenChange:t,cancelReturnFocusRef:n,submitReturnFocusRef:r,...i})=>{let s=(0,j.b)(),[o,l]=(0,p.useState)();(0,p.useEffect)(()=>l(void 0),[e]);let c=new Set((0,w.pn)(e=>e.currentReferences).filter(e=>"repository"===e.type).map(e=>e.id)),[d,u]=(0,p.useState)(),m=(0,p.useRef)(!1),h=async e=>{u(void 0),m.current=!0;let t=await s.service.fetchRepo(e);t.ok?l(t.payload):u("Error: failed to load repository details. Please try again."),m.current=!1};return o?(0,a.jsx)(ev,{...i,open:e,onOpenChange:t,sourceRepository:o,cancelReturnFocusRef:n,submitReturnFocusRef:r}):(0,a.jsx)(eh.X1,{selectionVariant:"instant",open:e,onOpenChange:e=>{m.current||t(e)},selectedRepoIds:new Set,onSelectRepo:h,cancelReturnFocusRef:n,submitReturnFocusRef:r,description:"Choose a repository to browse for files and symbols.",featuredRepoIds:c,error:d})},ev=({renderAnchor:e,anchorRef:t,open:n,onOpenChange:r,submitReturnFocusRef:i,cancelReturnFocusRef:s,sourceRepository:o})=>{let{findFileWorkerPath:l}=(0,w.Pk)(),[c,d]=(0,p.useState)(""),u=(0,p.useRef)((0,ed.s)(d,250));(0,p.useEffect)(()=>{n||d("")},[n]);let{initialLoading:m,filterLoading:h,selected:g,unselected:x,toggleSelection:y}=function(e,t,n,r){let i=(0,w.Pk)(),a=(0,j.b)(),s=(0,v.c)(),o=function(e,t,n,r,i){let a=(0,v.c)(),s=new Map(i.filter(e=>"file"===e.type&&e.repoID===t?.id).map(e=>[e.path,e])),o=new Map(i.filter(e=>"folder"===e.type&&e.repoID===t?.id).map(e=>[e.path,e])),l=new Map(i.filter(e=>"symbol"===e.type&&"suggestionSymbol"===e.kind&&(e.suggestionDefinitions?.some(e=>e.repoID===t?.id)??!1)).map(e=>[e.name,e])),{isLoading:c,data:d}=(0,eu.I)({queryKey:["copilot-chat","files-autocomplete",t?.ownerLogin,t?.name,e],queryFn:async()=>t?(await a.fetchAutocompleteSuggestions(t,e),{filePaths:eI(Array.from(a.fileSuggestions.values()).map(e=>e.path),s.keys()),folderPaths:eI(Array.from(a.folderSuggestions.values()).map(e=>e.path),o.keys()),symbolNames:eI(Array.from(a.symbolSuggestions.values()).map(e=>e.name),l.keys())}):null,enabled:r}),[u,m]=(0,Z.U2)(d?.filePaths??null,e,n),[p,h]=(0,Z.U2)(d?.folderPaths??null,e,n),[f,g]=(0,Z.U2)(d?.symbolNames??null,e,n),x=[...u.slice(0,7).map(e=>a.fileSuggestions.get(e)??s.get(e)).filter(e=>!!e).map(e=>eR(e)).filter(e=>!!e),...p.slice(0,7).map(e=>a.folderSuggestions.get(e)??o.get(e)).filter(e=>!!e).map(e=>eR(e)).filter(e=>!!e),...f.slice(0,7).map(e=>a.symbolSuggestions.get(e)??l.get(e)).filter(e=>!!e).map(e=>eR(e)).filter(e=>!!e)],y=c&&!e;return{items:x,filterLoading:!y&&(c||m||h||g),initialLoading:y}}(t,n,r,e,i.currentReferences),l=i.currentReferences.map(e=>(0,f.Vb)(e)).filter(e=>void 0!==e),{selected:c=[],unselected:d=[]}=(0,em.O)(o.items,e=>l.includes(e.id)?"selected":"unselected"),u=(0,p.useCallback)(async e=>{let t=i.currentReferences.find(t=>e.id===(0,f.Vb)(t));t?a.removeReference(t):await eC(e,i,s)},[s,a,i]);return{...o,selected:c,unselected:d,toggleSelection:u}}(n,c,o,l),b=g.length+x.length,I=`${o.ownerLogin}/${o.name}`;return(0,a.jsxs)(M.A,{sx:{flexGrow:"0 !important"},children:[e?.({}),(0,a.jsxs)(X.X,{anchorRef:t,title:"Select files, folders, and symbols",description:ef(I),onCancel:()=>{(0,J.flushSync)(()=>r(!1)),i.current?.focus()},onSubmit:()=>{(0,J.flushSync)(()=>r(!1)),s.current?.focus()},open:n,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[(0,a.jsx)(X.X.Header,{children:(0,a.jsx)(X.X.SearchInput,{loading:h,onChange:e=>u.current(e.target.value),placeholder:eg,"aria-label":eg})}),(0,a.jsx)(E.l,{sx:{minHeight:340},children:m?(0,a.jsx)(X.X.Loading,{children:"Fetching files, folders, and symbols\u2026"}):0!==b||h?(0,a.jsxs)(a.Fragment,{children:[g.map(e=>(0,a.jsx)(eb,{item:e,selected:!0,toggleSelection:y},e.id)),g.length>0&&x.length>0&&(0,a.jsx)(E.l.Divider,{}),x.map(e=>(0,a.jsx)(eb,{item:e,selected:!1,toggleSelection:y},e.id))]}):(0,a.jsx)(X.X.Message,{variant:"empty",title:"No files or symbols found",children:"Try a different search term"})})]})]})};function ew({open:e,setOpen:t,renderAnchor:n}){return(0,a.jsx)(z.T,{open:e,onOpen:()=>t(!0),onClose:()=>t(!1),renderAnchor:e=>n?.(e)??(0,a.jsx)(a.Fragment,{}),children:(0,a.jsxs)("div",{className:ep.chooseRepoInstructionPanel,children:[(0,a.jsx)(u.PaperclipIcon,{}),(0,a.jsx)("h3",{className:ep.chooseRepoTitle,children:"Attach a repository first"}),(0,a.jsx)("p",{className:ep.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]})})}let ej=e=>`reference-list-item-${e.id}`;function eb({toggleSelection:e,selected:t,item:n}){return(0,a.jsxs)(E.l.Item,{onSelect:()=>{e(n),setTimeout(()=>{document.getElementById(ej(n))?.focus()})},selected:t,"aria-checked":t,id:ej(n),sx:{mx:2,'&[data-is-active-descendant="activated-directly"]':{backgroundColor:"transparent",outline:"2px solid var(--focus-outlineColor, var(--color-accent-emphasis))",outlineOffset:"-2px"}},children:[(0,a.jsx)(E.l.LeadingVisual,{children:n.renderLeadingVisual()}),(0,a.jsx)(M.A,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n.text})]})}function eI(e,t){return Array.from(new Set([...e,...t]))}function eR(e){let t=(0,f.Vb)(e);switch(e.type){case"symbol":return{id:t,key:t,renderLeadingVisual:()=>(0,a.jsx)(u.CodeSquareIcon,{}),text:e.name};case"file":return{id:t,key:t,renderLeadingVisual:()=>(0,a.jsx)(u.FileIcon,{}),text:e.path};case"folder":return{id:t,key:t,renderLeadingVisual:()=>(0,a.jsx)(u.FileDirectoryFillIcon,{}),text:e.path};case"file-diff":return{id:t,key:t,renderLeadingVisual:()=>(0,a.jsx)(u.FileDiffIcon,{}),text:(0,f.Mw)(e)}}}async function eC(e,t,n){if(e.id&&"string"==typeof e.id&&e.text){let r=n.symbolSuggestions.get(e.text),i=n.fileSuggestions.get(e.text),a=n.folderSuggestions.get(e.text);r&&await n.addToReferences(r,t),i&&await n.addToReferences(i,t),a&&await n.addToReferences(a,t)}}try{ex.displayName||(ex.displayName="TopicReferencesSelectPanel")}catch{}try{ey.displayName||(ey.displayName="MultistepReferencesSelectPanel")}catch{}try{ev.displayName||(ev.displayName="ReferencesSelectPanel")}catch{}try{ew.displayName||(ew.displayName="ChooseRepositoryInstruction")}catch{}try{eb.displayName||(eb.displayName="ReferenceListItem")}catch{}function eS({panel:e,onPanelChange:t,anchorRef:n,...r}){let{inputRef:i}=r,o=(0,j.b)(),l=(0,w.Pk)(),c=(0,v.c)(),d=!!g.W.topicsAsReferences||(0,f.Z6)(l.currentTopic),m=l.renderKnowledgeBases&&(l.currentTopic&&(0,f.Z6)(l.currentTopic)||!l.currentTopic),{model:h}=(0,w.bP)("model"),y=g.W.attachImagesImmersive&&"immersive"===l.mode&&!!h.capabilities.supports.vision||!1,b=(0,T.kw)(r),I=(0,p.useRef)(null);return(0,a.jsxs)("div",{children:[y&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("input",{id:"image-uploader",hidden:!0,ref:I,type:"file",accept:x.s.getAllowedImageFileExtensions(h),onChange:e=>{if(!e.target.files)return;let t=e.target.files[0];e.currentTarget.value="",t&&new x.s(l,o,c).addImageAttachment(t,"menu")}})}),(0,a.jsx)(k.W,{anchorRef:n,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,a.jsx)(k.W.Overlay,{width:"small",side:"outside-top",align:"end",portalContainerName:"assistive"===l.mode?ec.E5:void 0,children:(0,a.jsxs)(E.l,{children:[(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:l.mode}),t("references")},inactiveText:d?void 0:"First attach a repository",children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.FileCodeIcon,{})}),"Files, folders, and symbols\u2026"]}),(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:l.mode}),t("repositories")},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.RepoIcon,{})}),g.W.topicsAsReferences?"Repositories":"Repository","\u2026"]}),m&&(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:l.mode}),t("knowledge-bases")},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.BookIcon,{})}),g.W.topicsAsReferences?"Knowledge bases":"Knowledge base","\u2026"]}),y&&(0,a.jsxs)(E.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:l.mode}),t(null),I.current?.click()},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.ImageIcon,{})}),"Image\u2026"]}),(0,a.jsx)(D,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>b(e.slug))})]})})}),g.W.topicsAsReferences?(0,a.jsx)(ey,{open:"references"===e,onOpenChange:e=>t(e?"references":null),submitReturnFocusRef:i,cancelReturnFocusRef:n}):(0,a.jsx)(ex,{open:"references"===e,onOpenChange:e=>t(e?"references":null),submitReturnFocusRef:i,cancelReturnFocusRef:n}),g.W.topicsAsReferences?(0,a.jsx)(eh.FZ,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:i,cancelReturnFocusRef:n}):(0,a.jsx)(eh.Ee,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:i,cancelReturnFocusRef:n}),(0,a.jsx)(ee,{disabledForPreviewModelsProps:{anchorRef:n},emptyKnowledgeBaseProps:{anchorRef:n},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),submitReturnFocusRef:i,cancelReturnFocusRef:n}),"no-agents-available"===e&&(0,a.jsx)(U,{onClose:()=>t(null)}),"agents-not-supported"===e&&(0,a.jsx)($,{onClose:()=>t(null)})]})}try{eS.displayName||(eS.displayName="AttachmentMenu")}catch{}var eN=n(70255),eA=n(91385);let e_=()=>{r?.abort(),r=new AbortController},ek=async e=>{let t=new URL("/copilot/chat/autocomplete/repositories",window.location.origin),n=new URLSearchParams;return n.set("q",e),t.search=n.toString(),await eD(t)??[]},eE=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/issues",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await eD(n)??[]},eT=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/pulls",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await eD(n)??[]},eL=async(e,t)=>{let n=new URL("/copilot/chat/autocomplete/discussions",window.location.origin),r=new URLSearchParams;return r.set("repo",e),r.set("q",t),n.search=r.toString(),await eD(n)??[]},eD=async e=>{let t;e_();try{t=await fetch(e,{method:"GET",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},signal:r.signal})}catch(e){if("AbortError"!==e.name)throw e}return t&&t.ok?await t.json():null},eM=["issues","pulls","discussions"],eP=e=>e&&("string"==typeof e?e:e?.value);function eO({children:e}){let{mode:t}=(0,w.Pk)(),[n,r]=(0,p.useState)(()=>"undefined"!=typeof document);(0,p.useEffect)(()=>r(!0),[]);let[i,o]=(0,p.useState)(null),[l,c]=(0,p.useState)([]),d=(0,T.JE)(i?.trigger.triggerChar===T.Z3),m=(0,p.useCallback)(async(e,n="")=>(await ek(e)).map(e=>({value:`${e.nameWithOwner}${n}`,key:e.nameWithOwner,render:n=>(0,a.jsxs)(E.l.Item,{...n,onSelect:()=>(0,s.BI)("dotcom_chat.activate",{target:"REPO_MENU_ITEM_SELECTED",mode:t,command:e.nameWithOwner}),children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.RepoIcon,{})}),(0,a.jsx)("span",{className:"text-normal",children:e.name}),(0,a.jsx)(E.l.Description,{variant:"inline",truncate:!0,children:e.owner})]},e.nameWithOwner)})),[t]);(0,p.useEffect)(()=>{async function e(){if(!i)return;let e=i.query.toLowerCase(),n=t=>{let n=t.toLowerCase();return n.startsWith(e)&&n!==e};if(i.trigger.triggerChar===T.Z3){d.disabled&&c([]),d.loading&&c(["loading"]),""===e&&(0,s.BI)("dotcom_chat.activate",{target:"AGENT_COMMAND_MENU_TRIGGERED",mode:t}),c((d.availableAgents?.filter(e=>n(e.slug)).slice(0,10)??[]).map(e=>({value:e.slug,key:e.slug,render:n=>(0,a.jsxs)(E.l.Item,{...n,onSelect:()=>(0,s.BI)("dotcom_chat.activate",{target:"AGENT_COMMAND_MENU_ITEM_SELECTED",mode:t,command:e.slug}),children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(L.r,{src:e.avatarUrl})}),e.name,(0,a.jsxs)(E.l.Description,{variant:"inline",truncate:!0,children:[T.Z3,e.slug]}),d.showLimit&&(0,a.jsx)(E.l.Description,{variant:"block",children:"You're limited to one agent per thread."})]},e.slug)})));return}if(g.W.chatAutocomplete){let t,n;let r=e.match(/^([\w-.]+\/[\w-.]+)\/(\w+)\/([\d\w]*)$/)??[],i=r[3]??void 0;if([,t,n]=r,void 0!==t&&void 0!==n&&void 0!==i&&eM.includes(n)){let e=[];switch(n){case"issues":c(e=(await eE(t,i)).map(e=>({render:t=>(0,a.jsxs)(E.l.Item,{...t,children:[(0,a.jsxs)(E.l.LeadingVisual,{children:["draft"===e.state&&(0,a.jsx)(u.IssueDraftIcon,{className:"fgColor-neutral"}),"open"===e.state&&(0,a.jsx)(u.IssueOpenedIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,a.jsx)(u.IssueClosedIcon,{className:"fgColor-done"})]}),(0,a.jsx)(K.A,{title:e.title,maxWidth:350,children:e.title}),(0,a.jsxs)(E.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/issues/${e.number} `})));break;case"pulls":c(e=(await eT(t,i)).map(e=>({render:t=>(0,a.jsxs)(E.l.Item,{...t,children:[(0,a.jsxs)(E.l.LeadingVisual,{children:["draft"===e.state&&(0,a.jsx)(u.GitPullRequestDraftIcon,{className:"fgColor-warning"}),"open"===e.state&&(0,a.jsx)(u.GitPullRequestIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,a.jsx)(u.GitPullRequestClosedIcon,{className:"fgColor-done"})]}),(0,a.jsx)(K.A,{title:e.title,maxWidth:350,children:e.title}),(0,a.jsxs)(E.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/pulls/${e.number} `})));break;case"discussions":e=(await eL(t,i)).map(e=>({render:t=>(0,a.jsxs)(E.l.Item,{...t,children:[(0,a.jsxs)(E.l.LeadingVisual,{children:["open"===e.state&&(0,a.jsx)(u.CommentDiscussionIcon,{className:"fgColor-open"}),"closed"===e.state&&(0,a.jsx)(u.DiscussionClosedIcon,{className:"fgColor-muted"})]}),(0,a.jsx)(K.A,{title:e.title,maxWidth:350,children:e.title}),(0,a.jsxs)(E.l.TrailingVisual,{style:{marginLeft:"0.5rem"},children:["#",e.number]})]}),value:`${t}/discussions/${e.number} `}))}e.length>1||eP(e[0])!==`${t}/${n}/${i}`?c(e):c([])}if([,t,n]=e.match(/^([\w-.]+\/[\w-.]+)\/(\w*)$/)??[],void 0!==t&&void 0!==n){let e=[{value:`${t} `,render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Repository"})},{value:`${t}/discussions/`,render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Discussion"})},{value:`${t}/issues/`,render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Issue"})},{value:`${t}/pulls/`,render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Pull Request"})}].filter(e=>(0,eA.qA)(n,"string"==typeof e?e:e.value));e.length>1||eP(e[0])!==`${t}/${n}/`?c(e):c([])}if([,t]=e.match(/^([\w-.]*\/?[\w-.]*)$/)??[],void 0!==t){let n=await m(e,"/");(!e||(0,eA.qA)("agent",e))&&n.unshift({value:"agent:",render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Agent"})}),n.length>1||eP(n[0])!==`${t}/`?c(n):c([])}}else c([{value:"agent:",render:e=>(0,a.jsx)(E.l.Item,{...e,children:"Agent"})}])}i?e():c([])},[d.availableAgents,d.disabled,d.loading,d.showLimit,m,t,i]);let h=(0,p.useCallback)(e=>{o(e)},[]),f=(0,p.useCallback)(()=>{o(null)},[]);return n?(0,a.jsx)(eN.a,{fullWidth:!0,suggestions:l,triggers:[{triggerChar:"@",insertSpaceOnCommit:!1},{triggerChar:T.Z3,insertSpaceOnCommit:!1}],tabInsertsSuggestions:!1,onHideSuggestions:f,onShowSuggestions:h,children:e}):(0,a.jsx)("div",{children:e})}try{eO.displayName||(eO.displayName="Autocomplete")}catch{}let eB={container:"ChatInput-module__container--NFzCy",input:"ChatInput-module__input--iApWs",clicked:"ChatInput-module__clicked--hHA9l",attachments:"ChatInput-module__attachments--a9G6d",inputContainer:"ChatInput-module__inputContainer--BcExV",inputPreview:"ChatInput-module__inputPreview--f_0H3",token:"ChatInput-module__token--g4p0s",inputPreviewRef:"ChatInput-module__inputPreviewRef--SxNz0",trailingActions:"ChatInput-module__trailingActions--q2BNB",containerSmall:"ChatInput-module__containerSmall--PJkO5"};var eF=n(69676),eU=n(82678),e$=n(63867),eW=n(69425);let eq={container:"ChatInputReferences-module__container--kZx3r",attachmentsList:"ChatInputReferences-module__attachmentsList--c0Z3e",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--qEVr3",loading:"ChatInputReferences-module__loading--G1S4m",divider:"ChatInputReferences-module__divider--m7eF_",menuButton:"ChatInputReferences-module__menuButton--R82CM",functionLoading:"ChatInputReferences-module__functionLoading--_Tp1T"};var ez=n(60068);let eV=({className:e,isLoading:t,returnFocusRef:n,tokenSize:r="medium",onClickReference:i,getReferenceVersion:s})=>{let{currentReferences:o}=(0,w.Pk)(),c=(0,j.b)(),d=(0,p.useRef)(null),h=(0,eW.g)(d),g=(0,p.useMemo)(()=>(0,f.rT)(o),[o]),x=(0,p.useRef)(null);(0,eU.G)({containerRef:x,focusableElementFilter:e=>!e.hasAttribute("aria-hidden"),bindKeys:eF.z0.ArrowHorizontal|eF.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},[g]);let y=(0,p.useRef)([]),v=(e,t)=>{let r=y.current[t+1]??y.current[t-1]??n.current;r?.focus(),c.removeReference(e)},b=(0,p.useRef)(g);return((0,I.N)(()=>{if(b.current.length<g.length){let e=g.find(e=>!b.current.find(t=>(0,f.x_)(t,e))),t=e?g.indexOf(e):-1;y?.current?.[t]?.scrollIntoView({behavior:"smooth",inline:"end"})}b.current=g},[g]),0!==g.length||t)?(0,a.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:(0,m.$)(e,eq.container),ref:x,children:[(0,a.jsxs)("div",{className:(0,m.$)(eq.attachmentsList,h&&eq.scrolledToEnd,t&&eq.loading),ref:d,children:[g.map((e,t)=>"repository"===e.type?(0,a.jsx)(eH,{reference:e,ref:e=>{y.current[t]=e},"data-index":t,size:r,onRemove:()=>v(e,t),onClick:i,getReferenceVersion:s},(0,f.Vb)(e)):(0,a.jsx)(ez.B,{reference:e,ref:e=>{y.current[t]=e},"data-index":t,size:r,onRemove:()=>v(e,t),onClick:i,getReferenceVersion:s},(0,f.Vb)(e))),t&&(0,a.jsxs)("div",{className:eq.functionLoading,...(0,l.G)("loading-indicator"),children:[(0,a.jsx)(e$.A,{size:"small"}),"Retrieving\u2026"]})]}),(0,a.jsx)("div",{className:eq.divider}),(0,a.jsxs)(k.W,{children:[(0,a.jsx)(k.W.Anchor,{children:(0,a.jsx)(q.K,{icon:u.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:eq.menuButton,size:r})}),(0,a.jsx)(k.W.Overlay,{width:"small",children:(0,a.jsx)(E.l,{children:(0,a.jsxs)(E.l.Item,{onSelect:()=>{setTimeout(()=>n.current?.focus()),c.clearCurrentReferences()},children:[(0,a.jsx)(E.l.LeadingVisual,{children:(0,a.jsx)(u.TrashIcon,{})}),"Remove attachments"]})})})]})]}):null},eH=(0,p.forwardRef)(function(e,t){let n=e.reference,r=(0,w.pn)(e=>e.model&&!e.model.hasLimitedCapabilities),i=`${n.ownerLogin}/${n.name}`,[s,o]=(0,Z.vn)(i),l=(0,p.useRef)(!1),c=s.code===Z.W5.Unindexed||s.docs===Z.W5.Unindexed;return(0,p.useEffect)(function(){!l.current&&c&&r&&(l.current=!0,o())},[r,c,o]),(0,a.jsx)(ez.B,{ref:t,...e})});try{eV.displayName||(eV.displayName="ChatInputReferences")}catch{}try{eH.displayName||(eH.displayName="RepoReferenceToken")}catch{}try{eH.displayName||(eH.displayName="RepoReferenceToken")}catch{}let eK=["issue","pull-request","discussion","figma"],eG=e=>{switch(e){case"issue":default:return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"repo":return"repository"}},eX=e=>{let t=(0,w.Pk)(),n=(0,v.c)(),r=(0,j.b)(),i=r.maxMessagesReached(),S="loading"===t.slashCommandLoading.state,A=e.hideAttachmentButton||!1,{typingHasStarted:_,textAreaRef:k,textareaPreviewRef:E,textAreaPreviewContainerRef:T,text:L,setText:D,handleSubmit:M,handleSubmitToNewThread:P,handleScroll:O,handleChange:B,handleStop:F,handleFocus:U}=function(e){let t=(0,w.Pk)(),n=(0,j.b)(),r=(0,v.c)(),{selectedThreadID:i}=t,a=C.J.getSavedMessage(i),o=C.J.getSavedUserMessageOnError(i),[l,c]=(0,p.useState)(o??a??""),[d,u]=(0,p.useState)(!1),m=(0,b.X)(["mac"]),h=(0,p.useRef)(null),x=e.textAreaRef||h,y=(0,p.useRef)(null),S=(0,p.useRef)(null),A=t.messages.filter(e=>"user"===e.role),_=(0,p.useRef)(0),{search:k,pathname:E}=(0,R.zy)(),T=(0,p.useRef)(null),L=(0,p.useRef)(()=>{}),D=(0,p.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,p.useEffect)(()=>{if("immersive"!==t.mode)return;let e=new URLSearchParams(k).get("prompt");e&&("/copilot"===E||"/copilot/"===E)?(c(e),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"})):c("")},[k,E,t.mode]),(0,p.useEffect)(()=>{D()},[D]);let M=e=>m?e.metaKey:e.ctrlKey;(0,p.useEffect)(()=>{(async function(){if(g.W.topicsAsReferences)return;let e=t.currentTopic;e&&(0,f.Z6)(e)&&void 0!==t.currentTopic&&await r.fetchAutocompleteSuggestions(e,"")})()},[r,t.currentTopic]),(0,p.useEffect)(()=>{C.J.setSavedMessage(i,l)},[i,l]),(0,I.N)(()=>{let e=0;!function t(){if(!x.current||!S.current||!y.current)return;e++,0===x.current.scrollHeight&&e<10&&setTimeout(t,1),x.current.style.height="0";let n=x.current.scrollHeight,r=Math.min(n,300);y.current.style.height=`${n}px`,x.current.style.height=`${n}px`,S.current.style.height=`${r}px`}()},[l,x,y]);let P=async e=>{u(!0),"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.nativeEvent.isComposing?M(e)&&e.shiftKey&&"s"===e.key?(e.preventDefault(),await F()):"ArrowUp"===e.key&&x.current&&(""===x.current.value||_.current>0)&&0===x.current.selectionStart&&A?.length>_.current&&"assistive"===t.mode?(e.preventDefault(),_.current++,c(A[A.length-_.current].content||"")):"ArrowDown"===e.key&&_.current>0&&x.current&&x.current.selectionStart===x.current.value.length&&"assistive"===t.mode&&(e.preventDefault(),_.current--,0===_.current?c(""):c(A[A.length-_.current].content||"")):(e.preventDefault(),await B()),O()},O=(0,p.useCallback)(()=>{x?.current&&y?.current&&S?.current&&(y.current.scrollTop=x.current.scrollTop,y.current.scrollLeft=x.current.scrollLeft)},[x]),B=async r=>{if(u(!1),C.J.clearSavedUserMessage(i),C.J.clearSavedUserMessageOnError(i),t.defaultRecipient&&!l.includes(`@${t.defaultRecipient}`)&&(t.defaultRecipient=void 0),r?.preventDefault(),"assistive"===t.mode&&await N(l,t,n)){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:l}),"/new"===l.trim()&&C.J.setSavedMessageFast(i,null),c("");return}if(e.isLoading)e.onAbort?.();else{let r=l;if(!r){let e=t.currentReferences,[i,a]=n.tryInferMessage(e);if(!i||!a)return;r=a}c(""),await e.onSubmit?.(r)}},F=(0,p.useCallback)(()=>n.sendMessageToNewThread(i,l,t.currentReferences,t.context),[n,i,t.context,t.currentReferences,l]),U=(0,p.useCallback)(e=>{u(!0),x?.current&&(c(e.target.value),_.current=0,O())},[O,x]),$=(0,p.useCallback)(async()=>{await n.stopStreaming(),null!=i&&(n.startThreadReload(),await new Promise(e=>{T.current=setTimeout(()=>e(i),6e3)}),L.current=await n.fetchMessages(i,!0,!0))},[n,i]);return(0,p.useEffect)(()=>{L.current&&(L.current(),L.current=()=>{})},[t.messages]),(0,p.useEffect)(()=>()=>{T.current&&(clearTimeout(T.current),T.current=null),n.cancelThreadReload(),L.current=()=>{}},[n]),{typingHasStarted:d,textAreaRef:x,textareaPreviewRef:y,textAreaPreviewContainerRef:S,text:l,setText:c,handleSubmit:B,handleSubmitToNewThread:F,handleKeyDown:P,handleScroll:O,handleChange:U,handleStop:$,handleFocus:e=>{e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},shouldShowKnowledge:t.renderKnowledgeBases&&(t.currentTopic&&(0,f.Z6)(t.currentTopic)||!t.currentTopic)}}({isLoading:t.isWaitingOnCopilot||S||t.currentReferences.some(e=>"image"===e.type&&!e.attachment.isLoaded),onSubmit:e.onSubmit,onAbort:e.onAbort,textAreaRef:e.textAreaRef}),$=t.isWaitingOnCopilot?`Copilot is responding\u{2026}`:t.defaultRecipient?void 0:i?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"Ask Copilot";t.defaultRecipient&&""===L&&!_&&D(`@${t.defaultRecipient} `);let[W,q]=(0,p.useState)([]),z=(0,p.useMemo)(()=>W.filter(e=>!e.loadedRefData),[W]),V=(0,o.E)({queries:z.map(e=>({enabled:g.W.copilotUIRefs,queryKey:["copilot","chat-links","item-url",e.originalText],queryFn:async()=>{let t;t=g.W.chatAutocomplete?"figma"===e.type?await (0,d.lS)(`/copilot/chat/validate-url?url=${e.originalText}`):await (0,d.lS)(`/copilot/chat/reference/${e.repository.owner}/${e.repository.name}/${eG(e.type)}/${e.linkNumber}`):await (0,d.lS)(`/copilot/chat-links?item_url=${e.originalText}`);let n=await t.json();if(e2(n)||e1(n)||e6(n)||e3(n)||e7(n))return n}})),combine:e=>({data:e.map(e=>e.data).filter(e=>!!e),pending:e.some(e=>e.isPending)})});(0,p.useEffect)(()=>{if(!V.pending&&V.data.length>0){let e=[...W];for(let n of V.data)"issue"!==n.type&&"pull-request"!==n.type&&"discussion"!==n.type||t.currentReferences.find(e=>(0,f.x_)(n,e))||(e=e.map(e=>e5(e,n)?{...e,loadedRefData:!0}:e),r.addReference(n,"chatInput")),"immersive"===t.mode&&g.W.immersiveFigmaIntegration&&"figma"===n.type&&!t.currentReferences.find(e=>(0,f.x_)(n,e))&&(e=e.map(e=>e5(e,n)?{...e,id:n.id,loadedRefData:!0}:e),r.addReference(n,"chatInput"));if(g.W.copilotUIRefs){let{processedText:n}=eY(L,e,"immersive"===t.mode,!0);D(n),q(e)}}},[V.data,V.pending,r,D,t.currentReferences,t.mode,L,W]);let H=(0,p.useRef)(t.currentReferences);(0,p.useEffect)(()=>{if(g.W.copilotUIRefs&&t.currentReferences.length<H.current.length){let e=W.map((e,n)=>t.currentReferences.find(t=>e5(e,t))?-1:n).filter(e=>-1!==e);q(W.filter((t,n)=>!e.includes(n)))}H.current=t.currentReferences},[t.currentReferences,W]);let K=(0,p.useRef)(null),[G,X]=(0,p.useState)(null),{model:J}=(0,w.bP)("model"),Z=g.W.attachImagesImmersive&&"immersive"===t.mode&&!!J.capabilities.supports.vision||!1,Q=(0,p.useCallback)((e,i)=>{if(!Z||!e)return;let a=Array.from(e),s=a.filter(e=>x.s.isTypeAllowed(e.type,J));if(s.length!==a.length&&(0,y.d)("included_unsupported_file",{fileTypes:a.map(e=>e.type).join(","),uploadType:i}),s.length>0){let e=new x.s(t,r,n);for(let t of s)e.addImageAttachment(t,i)}},[Z,J,t,r,n]),Y=(0,p.useCallback)(e=>{e.preventDefault(),Q(e.dataTransfer?.files||null,"drag")},[Q]),ee=Z&&g.W.wholeAreaDragDrop;return(0,p.useEffect)(()=>{if(ee)return;let e=k?.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("dragover",t),e.addEventListener("drop",Y),()=>{e.removeEventListener("dragover",t),e.removeEventListener("drop",Y)}},[k,ee,Y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.tL,{commands:{"github:cancel":()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:t.mode}),F()},"copilot-chat:send-message":()=>{q([]),M()},"copilot-chat:send-message-new-conversation":()=>void P(),"copilot-chat:add-attachment":()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:t.mode}),X("attachment-types"===G?null:"attachment-types")},"copilot-chat:edit-last-message":0===L.length?()=>{let e=t.messages.findLast(e=>"user"===e.role)?.id;e&&r.startEditingMessage(e)}:void 0,"copilot-chat:deep-codesearch":()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:t.mode}),r.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!t.skillOptions?.deepCodeSearch})}},children:(0,a.jsxs)("form",{className:(0,m.$)(eB.container,{[eB.containerSmall]:"small"===e.size}),children:[(0,a.jsx)(eV,{className:eB.attachments,returnFocusRef:K,tokenSize:"small"===e.size?"small":"medium",isLoading:V.pending&&W.some(e=>!e.loadedRefData),onClickReference:e.onClickReference,getReferenceVersion:e.getReferenceVersion}),(0,a.jsxs)(c.tL.LimitKeybindingScope,{commandIds:["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],className:eB.inputContainer,ref:T,children:[(0,a.jsx)(eO,{children:(0,a.jsx)("textarea",{autoFocus:!0,id:h.wg,className:eB.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:e=>{let n=e.clipboardData;if(n?.items){let r=[];for(let i=0;i<n.items.length;i++){let a=n.items[i];if(a&&"file"===a.kind){let e=a.getAsFile();e&&r.push(e)}if(g.W.copilotUIRefs&&a&&"string"===a.kind&&["text","text/plain"].includes(a.type)){e.preventDefault();let{processedText:r,processedRefs:i}=eY(`${L.substring(0,k?.current?.selectionStart??0)}${n.getData(a.type)}${L.substring(k?.current?.selectionEnd??0,L.length)}`,W,"immersive"===t.mode);D(r),q(i)}}if(r.length>0){e.preventDefault();let t=new DataTransfer;for(let e of r)t.items.add(e);Q(t.files,"paste")}}},ref:k,onScroll:O,onChange:e=>{if(B(e),g.W.copilotUIRefs){let{processedText:n,processedRefs:i}=eY(e.target.value,W,"immersive"===t.mode,!0);if(D(n),q(i),i.length<H.current.length)for(let e of H.current.filter(e=>eK.includes(e.type)&&!i.find(t=>e5(t,e))))r.removeReference(e)}},onFocus:U,placeholder:$,value:L,"data-react-autofocus":!0,disabled:i,...(0,l.G)("copilot-chat-input-textarea")})}),(0,a.jsx)(eJ,{text:L,textareaPreviewRef:E,textInputRefs:W,size:e.size})]}),(0,a.jsxs)("div",{className:eB.trailingActions,children:[g.W.showDeepCodeSearchButton&&(0,a.jsx)(c.N5,{commandId:"copilot-chat:deep-codesearch",icon:u.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,m.$)({[eB.clicked]:t.skillOptions?.deepCodeSearch})}),!A&&(0,a.jsx)(c.N5,{commandId:"copilot-chat:add-attachment",icon:u.PaperclipIcon,variant:"invisible",ref:K,tooltipDirection:"n"}),e.isStreaming||t.isWaitingOnCopilot?(0,a.jsx)(eQ,{}):(0,a.jsx)(eZ,{isLoading:S||t.currentReferences.some(e=>"image"===e.type&&!e.attachment.isLoaded)})]})]})}),(0,a.jsx)(eS,{inputRef:k,inputOnChange:B,anchorRef:K,panel:G,onPanelChange:X})]})};function eJ(e){let{text:t,textareaPreviewRef:n,textInputRefs:r}=e,{mention:i,textAfterMention:s}=function({text:e,textareaPreviewRef:t}){let n=(0,j.b)(),r=(0,w.Pk)(),[i,a]=(0,p.useState)(""),[s,o]=(0,p.useState)(""),{agents:l,customCopilots:c,agentsPath:d,messages:u}=(0,w.Pk)();return(0,p.useEffect)(()=>{if(!t.current)return;let r=e.match(/^@\S+/g);if(r&&r.length>0){let t;!l&&d&&n.fetchAgents(d),g.W.customCopilots&&!c&&n.fetchCustomCopilots();let i=[];if(l&&i.push(...l),c&&i.push(...c),0===i.length)return;let s=(0,f.Q7)(u);if(s.length>0){let e=s[0];t=i.filter(t=>_(t)===e.name)}else t=i;let m=r[0],p=m.substring(1);if(t.find(e=>_(e)===p)){a(m),o(e.replace(m,""));return}}a(""),o("")},[l,d,c,n,u,r.mode,e,t]),{mention:i,textAfterMention:s}}(e),o=function(e,t){let n=[],r=e.split(" ");for(let e=0;e<r.length;e++){let i=r[e],s=i,o=t.find(e=>e.processedText===i);(o?.loadedRefData||o?.type==="figma")&&(s=(0,a.jsx)("span",{className:eB.inputPreviewRef,...(0,l.G)("input-preview-ref"),children:o.processedText},`${o.originalText}-${e}`)),n.push(s),e<r.length-1&&n.push(" ")}return n}(t,r);return(0,a.jsx)("div",{id:"copilot-chat-textarea-preview",...(0,l.G)("copilot-chat-input-textarea-preview"),"aria-hidden":!0,className:eB.inputPreview,ref:n,role:"presentation",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:eB.token,children:i}),s]}):(0,a.jsx)(a.Fragment,{children:o})})}function eZ({isLoading:e}){return(0,a.jsx)(c.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:u.PaperAirplaneIcon,"aria-label":"Send now",disabled:e,tooltipDirection:"n"})}function eQ(){return(0,a.jsx)(c.N5,{...(0,l.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:u.SquareFillIcon,tooltipDirection:"n",sx:{bg:"danger.subtle",color:"danger.fg",":hover":{bg:"danger.muted"}}})}function eY(e,t,n,r=!1){let i=[],a=/^(?:http:\/\/github\.localhost|https:\/\/github\.com)\/[^/]+\/[^/]+\/(issues|pull|discussions)\/\d+$/,s=/^https:\/\/www\.figma\.com\/.+$/,o=/^@([\w-.]+\/[\w-.]+)$/,l=/^@([\w-.]+\/[\w-.]+)\/(\w+)\/(\d+)$/,c=e.split(" ");return{processedText:c.map((e,d)=>{let u=i.find(t=>t.originalText===e);if(u)return u.loadedRefData?u.processedText:u.originalText;let m=t.find(t=>t.originalText===e||t.processedText===e);if(m)return(i.push(m),m.loadedRefData)?m.processedText:m.originalText;if(n&&g.W.immersiveFigmaIntegration&&s.test(e)){if(r&&d===c.length-1)return e;let t=e.replace("https://www.","");return i.push({originalText:e,processedText:`${t.length>30?`${t.substring(0,30)}...`:t}`,type:"figma"}),e}if(a.test(e)){if(r&&d===c.length-1)return e;let t=e.split("/"),n=t[t.length-1],a=t[t.length-2],s=t[t.length-3],o=t[t.length-4];return i.push({originalText:e,processedText:`@${o}/${s}/${a}/${n}`,type:e0(a),linkNumber:Number(n),repository:{name:s,owner:o}}),e}if(o.test(e)){if(r&&d===c.length-1)return e;let t=e.match(o),n=t?.[1];if(n){let t=n.split("/"),r=t[0],a=t[1];i.push({originalText:e,processedText:e,type:"repo",repository:{name:a,owner:r}})}return e}if(l.test(e)){if(r&&d===c.length-1)return e;let t=e.match(l),n=t?.[1],a=e0(t?.[2]),s=t?.[3];if(n&&a&&s){let t=n.split("/"),r=t[0],o=t[1];i.push({originalText:e,processedText:e,type:a,linkNumber:Number(s),repository:{name:o,owner:r}})}}return e}).join(" "),processedRefs:i}}function e0(e){switch(e){case"discussions":return"discussion";case"pull":return"pull-request";default:return"issue"}}let e1=e=>"issue"===e.type,e6=e=>"pull-request"===e.type,e3=e=>"discussion"===e.type,e7=e=>"figma"===e.type,e2=e=>"repository"===e.type,e5=(e,t)=>{switch(e.type){case"issue":case"discussion":case"pull-request":return e.type===t.type&&e.linkNumber===t.number;case"figma":return e.type===t.type&&e.originalText===t.url;default:return!1}};try{eX.displayName||(eX.displayName="ChatInput")}catch{}try{eJ.displayName||(eJ.displayName="TextareaPreview")}catch{}try{eZ.displayName||(eZ.displayName="SubmitButton")}catch{}try{eQ.displayName||(eQ.displayName="StopButton")}catch{}},97891:(e,t,n)=>{n.d(t,{h:()=>s});var r=n(74848),i=n(34614);let a={container:"LegalDisclaimer-module__container--f7xb5"},s=()=>(0,r.jsxs)("span",{className:a.container,children:[(0,r.jsx)(i.A,{href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-chat-in-githubcom",inline:!0,muted:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]});try{s.displayName||(s.displayName="LegalDisclaimer")}catch{}},91582:(e,t,n)=>{n.d(t,{Y:()=>j,k:()=>b});var r=n(74848),i=n(16079),a=n(62456),s=n(46988),o=n(38621),l=n(89323),c=n(87330),d=n(8338),u=n(53526),m=n(63867),p=n(74144),h=n(37827),f=n(96540),g=n(47767),x=n(93589),y=n(65615),v=n(7426),w=n(27297);function j({onNewThreadSelected:e,limited:t,type:n="global",selectedModel:i,onModelSelected:a,disabled:o=!1}){let l=(0,v.b)(),{model:c,availableModels:d,mode:u,messages:m,currentReferences:p}=(0,y.Pk)(),h=(0,y.pn)(e=>"pending"===e.modelsLoading.state),{search:j,pathname:I}=(0,g.zy)(),[R,N]=(0,f.useState)(null);i||(i=c??w.UB);let A=d??[w.UB];return((0,f.useEffect)(()=>{h&&l.fetchModels()},[l,h]),(0,f.useEffect)(()=>{if("immersive"!==u)return;let e=new URLSearchParams(j).get("model");if(e&&("/copilot"===I||"/copilot/"===I)){if(c.id===e)return;let t=d?.find(t=>t.id===e);t&&(l.selectModel(t,"url"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_MODEL_LOADED_FROM_URL",mode:"immersive"}))}},[d]),A.length<2)?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{selectedModel:i,models:A,type:n,onModelPicked:e=>{("global"!==n||e.id!==i.id)&&((0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_MODEL_SELECT",mode:"immersive",model:e.id,isUnchanged:e.id===i.id,type:n}),("message-retry"===n?(0,x.B)(m):m).some(e=>e.skillExecutions?.length)&&(!e.capabilities.supports.tool_calls||e.isThirdParty||"o1-ga"===e.capabilities.family)?N({model:e,command:{action:"requires-new-conversation",reason:"external-content"}}):(("message-retry"===n?(0,x.B)(m):m).some(e=>e.mediaContent?.length)||p.some(e=>"image"===e.type))&&!e.capabilities.supports.vision?N({model:e,command:{action:"requires-new-conversation",reason:"degraded-image-support"}}):e.policy&&"enabled"!==e.policy.state?N({model:e,command:{action:"requires-policy-approval"}}):a?a(e):l.selectModel(e))},limited:t,disabled:o,variant:"invisible"}),R?.command.action==="requires-new-conversation"&&(0,r.jsx)(C,{model:R.model,reason:R.command.reason,onDismiss:()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_REQUIRES_NEW_CONVERSATION_CANCEL",mode:"immersive",model:R.model.id,type:n}),N(null)},onSwitch:async()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_REQUIRES_NEW_CONVERSATION_CONFIRM",mode:"immersive",model:R.model.id,type:n}),N(null),await e(),l.selectModel(R.model)}}),R?.command.action==="requires-policy-approval"&&(0,r.jsx)(S,{model:R.model,onDismiss:()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_POLICY_CANCEL",mode:"immersive",model:R.model.id,type:n}),N(null)},onConfirm:async()=>{await l.acceptModelPolicy(R.model),l.selectModel(R.model),(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_DIALOG_POLICY_CONFIRM",mode:"immersive",model:R.model.id,type:n}),N(null)}})]})}function b({selectedModel:e,models:t,onModelPicked:n,limited:i=!1,type:a,disabled:u,variant:m="invisible"}){let p=t.filter(e=>!e.preview),h=t.filter(e=>e.preview),g=new Set(t.map(e=>e.vendor)).size>1,x=t.some(e=>e.isThirdParty),y=i?_:[],v=(0,f.useCallback)(()=>{(0,s.BI)("dotcom_chat.activate",{target:"MODEL_PICKER_OPEN",mode:"immersive",model:e.id,type:a})},[e.id,a]),w=(0,f.useRef)(null),[j,b]=(0,f.useState)(null);return(0,f.useEffect)(()=>{w.current&&b(w.current.getBoundingClientRect().bottom>window.innerHeight/1.55?"up":"down")},[j]),(0,r.jsx)("div",{ref:w,children:(0,r.jsxs)(l.W,{children:["global"===a?(0,r.jsxs)(l.W.Button,{onClick:v,"aria-label":"Switch model",variant:m??"invisible",disabled:u,children:[(0,r.jsx)("span",{className:"sr-only",children:"Model: "}),e.displayName]}):(0,r.jsx)(l.W.Anchor,{onClick:v,"aria-label":"Retry with model",children:(0,r.jsx)(c.K,{variant:"invisible",icon:o.SyncIcon,"aria-label":"Retry",disabled:u,"data-testid":"message-retry-button",onClick:()=>{b(null)}})}),(0,r.jsx)(l.W.Overlay,{width:"global"===a?"medium":"small",align:"center",children:(0,r.jsxs)(d.l,{selectionVariant:"global"===a?"single":void 0,children:["message-retry"===a&&"down"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{selectedModel:e,onModelPicked:n}),(0,r.jsx)(d.l.Divider,{})]}),p.length>0&&(0,r.jsxs)(d.l.Group,{children:[(0,r.jsx)(d.l.GroupHeading,{children:"Models"}),p.map(t=>(0,r.jsx)(R,{model:t,selected:t.id===e.id&&"global"===a,onModelPicked:n,hasMultipleVendors:g,hasThirdPartyModel:x},t.id))]}),(h.length>0||y.length>0)&&(0,r.jsxs)(d.l.Group,{children:[(0,r.jsx)(d.l.GroupHeading,{children:"Preview"}),h.map(t=>(0,r.jsx)(R,{model:t,selected:t.id===e.id&&"global"===a,onModelPicked:n,hasMultipleVendors:g,hasThirdPartyModel:x},t.id)),y.map(e=>(0,r.jsxs)(d.l.LinkItem,{href:A,children:[(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(N,{model:e})}),e.displayName,(0,r.jsx)(d.l.Description,{variant:"block",truncate:!0,children:e.vendor}),(0,r.jsx)(d.l.TrailingVisual,{children:(0,r.jsx)("div",{className:"fgColor-muted",children:"Upgrade"})})]},e.id))]}),"message-retry"===a&&"up"===j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.l.Divider,{}),(0,r.jsx)(I,{selectedModel:e,onModelPicked:n})]})]})})]})})}function I({selectedModel:e,onModelPicked:t}){return(0,r.jsxs)(d.l.Item,{onSelect:()=>t(e),children:[(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)("span",{"data-testid":"dropdown-message-retry-icon",children:(0,r.jsx)(o.SyncIcon,{})})}),"Try again",(0,r.jsx)(d.l.Description,{variant:"block",truncate:!0,children:e.displayName})]},e.id)}function R({model:e,selected:t,onModelPicked:n,hasMultipleVendors:i,hasThirdPartyModel:a}){return(0,r.jsxs)(d.l.Item,{onSelect:()=>n(e),selected:t,children:[(i||a)&&(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(N,{model:e})}),e.displayName,(i||a)&&(0,r.jsx)(d.l.Description,{variant:"block",truncate:!0,children:e.vendor})]},e.id)}function C({model:e,onDismiss:t,onSwitch:n,reason:i}){return(0,r.jsxs)(u.K,{title:"Switch model",onClose:e=>"confirm"===e?n():t(),confirmButtonContent:"New conversation",confirmButtonType:"primary",children:["external-content"===i&&(0,r.jsxs)("p",{children:["The ",e.displayName," model currently doesn\u2019t support external context from ongoing conversations. Start a new conversation to chat with this model."]}),"degraded-image-support"===i&&(0,r.jsxs)("p",{children:["The ",e.displayName," model doesn\u2019t support answering questions about images. Start a new conversation without images to chat with this model."]})]})}function S({model:e,onDismiss:t,onConfirm:n}){let[a,s]=(0,f.useState)(null),[o,l]=(0,f.useState)(!1),c=e.policy?.terms??"",d=async()=>{try{l(!0),await n(),s(null)}catch{s("An error occurred while updating the policy")}finally{l(!1)}};return(0,r.jsxs)(p.l,{width:"large",onClose:t,title:`Enable ${e.displayName}`,footerButtons:[{buttonType:"default",content:"Cancel",onClick:t},{buttonType:"primary",content:o?(0,r.jsx)(m.A,{sx:{mx:2},size:"small"}):"Enable",onClick:()=>void d()}],children:[a&&(0,r.jsx)(h.l,{title:"Error",variant:"critical",children:a}),(0,r.jsx)(i.T,{markdown:c})]})}function N({model:e}){return e.logoURL?(0,r.jsx)(a.r,{alt:`${e.vendor} logo`,square:!0,size:18,src:e.logoURL}):(0,r.jsx)(o.CopilotIcon,{})}let A="https://github.com/features/copilot#pricing",_=[{id:"claude-3.7-sonnet-upgrade",displayName:"Claude 3.7 Sonnet",vendor:"Anthropic",logoURL:"/images/modules/marketplace/models/families/anthropic.svg"},{id:"o1-upgrade",displayName:"o1",vendor:"Azure OpenAI",logoURL:"/images/modules/marketplace/models/families/openai.svg"}];try{j.displayName||(j.displayName="ModelPicker")}catch{}try{b.displayName||(b.displayName="ModelPickerDesign")}catch{}try{I.displayName||(I.displayName="RetryListItem")}catch{}try{R.displayName||(R.displayName="ModelListItem")}catch{}try{C.displayName||(C.displayName="NewConversationConfirmationDialog")}catch{}try{S.displayName||(S.displayName="ModelPolicyConfirmationDialog")}catch{}try{N.displayName||(N.displayName="ModelVendorIcon")}catch{}},89401:(e,t,n)=>{n.d(t,{Cb:()=>h,Dq:()=>c,E5:()=>l,Gj:()=>d,UJ:()=>g,cB:()=>m,f1:()=>u,hl:()=>f,zc:()=>p});var r=n(74848),i=n(16255),a=n(75177),s=n(89323),o=n(96540);let l="copilotChatMenuPortalRoot",c="copilotChatMessagesMenuPortalRoot",d="copilotChatPortalRoot",u="copilotChatTopicPickerPortalRoot",m=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,i.c)(e.current,d)},[]),(0,r.jsx)(a.A,{ref:e,sx:{position:"absolute",top:0,right:0,zIndex:100}})},p=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,i.c)(e.current,l)},[]),(0,r.jsx)(a.A,{ref:e,sx:{position:"absolute",top:0,right:0}})},h=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,i.c)(e.current,c)},[]),(0,r.jsx)("div",{ref:e})},f=()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(0,i.c)(e.current,u)},[]),(0,r.jsx)("div",{ref:e})},g=({children:e,portalContainerName:t,...n})=>{let[i,a]=(0,o.useState)(()=>"undefined"!=typeof document);return((0,o.useEffect)(()=>a(!0),[]),i)?(0,r.jsx)(s.W.Overlay,{...n,portalContainerName:t||l,children:e}):null};try{m.displayName||(m.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{h.displayName||(h.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{g.displayName||(g.displayName="ActionMenuOverlay")}catch{}},60068:(e,t,n)=>{n.d(t,{B:()=>y,a:()=>v});var r,i=n(74848),a=n(91295),s=n(38621),o=n(87330),l=n(63867),c=n(34164),d=n(96540),u=n(82610),m=n(65615),p=n(7426),h=n(54006),f=n(90591);let g={referenceToken:"ReferenceToken-module__referenceToken--MoDht",small:"ReferenceToken-module__small--LxJV_",name:"ReferenceToken-module__name--Wq2Bs",trailingVisual:"ReferenceToken-module__trailingVisual--JeIeK",removeButton:"ReferenceToken-module__removeButton--BIbYP",icon:"ReferenceToken-module__icon--WJse5",openIcon:"ReferenceToken-module__openIcon--LVVWZ",closedIcon:"ReferenceToken-module__closedIcon--qYsTG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--ivG0w",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--S1IFs",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--PpoUe",figmaIcon:"ReferenceToken-module__figmaIcon--x5K98"};var x=n(12649);let y=(0,d.forwardRef)(function({reference:e,onClick:t,onRemove:n,size:r,getReferenceVersion:a},l){let h=(0,p.b)(),f=(0,m.pn)(e=>"immersive"===e.mode),y=v(e,(0,u.P)((0,m.A3)("currentTopic"))),w=(0,d.useId)(),j=a?.(e);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("a",{href:(0,u.JP)(e),className:(0,c.$)(g.referenceToken,"small"===r&&g.small),onKeyDown:e=>{n&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),n())},onClick:n=>{t&&(t(n,e),n.defaultPrevented)||f||(("issue"===e.type||"pull-request"===e.type||"discussion"===e.type)&&(window.open(e.url,"_blank"),self.focus()),["repository","folder","docset","third-party","image","issue","pull-request"].includes(e.type)||(n.preventDefault(),h.selectReference(e)))},ref:l,"aria-describedby":n&&w,children:[y&&(0,i.jsx)(y,{size:"small",className:(0,c.$)(g.icon,y===s.IssueOpenedIcon&&g.openIcon,y===s.GitPullRequestIcon&&g.openIcon,y===s.IssueClosedIcon&&g.closedIcon,y===s.GitPullRequestClosedIcon&&g.pullRequestClosedIcon,y===s.GitMergeIcon&&g.pullRequestMergedIcon)}),(0,i.jsx)("span",{className:g.name,children:(0,u.z$)(e)}),void 0!==j&&(0,i.jsx)("span",{className:g.trailingVisual,children:(0,i.jsx)(x.g,{version:j})}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.K,{tabIndex:-1,"aria-hidden":!0,size:r,icon:s.XIcon,"aria-label":"Remove",onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},tooltipDirection:"n",variant:"invisible",className:g.removeButton}),(0,i.jsx)("span",{hidden:!0,id:w,children:"press backspace or delete to remove"})]})]})})});function v(e,t){switch(e.type){case"figma":return w;case"file":return s.FileIcon;case"folder":return s.FileDirectoryFillIcon;case"file-diff":return s.FileDiffIcon;case"snippet":return t&&e.languageName&&h.Y.has(e.languageName)?s.BookIcon:s.CodeIcon;case"repository":return s.RepoIcon;case"symbol":return s.CodeSquareIcon;case"docset":return s.BookIcon;case"commit":return s.GitCommitIcon;case"pull-request":return function(e){if("pull-request"===e.type){if(e.draft&&"open"===e.state)return s.GitPullRequestDraftIcon;switch(e.state){case"open":default:return s.GitPullRequestIcon;case"closed":return s.GitPullRequestClosedIcon;case"merged":return s.GitMergeIcon}}}(e);case"repo-instructions":case"org-instructions":return s.NoteIcon;case"image":return e.attachment.isLoaded?s.ImageIcon:l.A;case"issue":return function(e){if("issue"===e.type)switch(e.state){case"open":default:return s.IssueOpenedIcon;case"closed":return s.IssueClosedIcon;case"not_planned":return s.SkipIcon}}(e);case"discussion":return s.CommentDiscussionIcon;case"web-search-result":return function(e){if("web-search-result"===e.type)return"bing_search"===e.reference_type?a._:s.GlobeIcon}(e);case"thread-scoped-file":return h.Y.has(e.language)?s.MarkdownIcon:s.CodeIcon;default:return}}function w(){return(0,i.jsx)("div",{className:g.figmaIconOuter,children:(0,i.jsx)(f._,{className:g.figmaIcon})})}try{y.displayName||(y.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{w.displayName||(w.displayName="StylizedFigmaIcon")}catch{}},61818:(e,t,n)=>{n.d(t,{Ee:()=>w,FZ:()=>j,X1:()=>b});var r=n(74848),i=n(46988),a=n(70642),s=n(53949),o=n(8338),l=n(61597),c=n(34164),d=n(96540),u=n(40961),m=n(41980),p=n(1750),h=n(82610),f=n(37937),g=n(65615),x=n(7426),y=n(89401),v=n(59010);function w(e){let{selectedThreadID:t,currentTopic:n}=(0,g.Pk)(),i=(0,x.b)(),a=(0,d.useCallback)(async e=>{f.J.setSelectedTopic(t??"",e.toString()),i.clearCurrentReferences(["image","issue"]),await i.fetchCurrentRepo(e)},[i,t]);return(0,r.jsx)(b,{...e,selectionVariant:"instant",selectedRepoIds:new Set(n?[n.id]:[]),onSelectRepo:a,description:"Choose a repository to chat about."})}function j(e){let{currentReferences:t}=(0,g.Pk)(),n=(0,x.b)(),i=t.filter(e=>"repository"===e.type),a=new Set(i.map(e=>e.id)),[s,o]=(0,d.useState)(),l=async t=>{o(void 0);let r=i.find(e=>e.id===t);if(r){n.removeReference(r);return}let a=await n.service.fetchRepo(t);if(!a.ok){o("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let s=(0,h.qS)(a.payload);n.addReference(s,"repoMenu")};return(0,r.jsx)(b,{...e,selectionVariant:"multiple",selectedRepoIds:a,onSelectRepo:l,description:"Choose repositories to chat about.",error:s})}function b({open:e,onOpenChange:t,submitReturnFocusRef:n,cancelReturnFocusRef:h,selectedRepoIds:f,featuredRepoIds:x=f,onSelectRepo:w,selectionVariant:j,description:b,error:I}){let{currentRepository:R,ssoOrganizations:C}=(0,g.Pk)(),[S,N]=(0,d.useState)(!0),[A,_]=(0,d.useState)("");(0,d.useEffect)(()=>{e||_("")},[e]);let[k,E]=(0,d.useState)(void 0),{repositories:T,loading:L}=(0,m.U)(A,k,E,e,R),D=(0,d.useMemo)(()=>L?"Loading repositories":0===T.length?"No repositories found":1===T.length?"1 repository found":`${T.length} repositories found`,[L,T.length]);(0,d.useEffect)(()=>{T.length>0&&S&&N(!1)},[T.length,S]);let M=(0,d.useMemo)(()=>C?C.map(e=>e.login):[],[C]),{featuredRepos:P,nonFeaturedRepos:O}=(0,p.O)(T,e=>x.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos"),[B,F]=(0,d.useState)(!1),U=async e=>{F(!0),await w(e),F(!1)};return(0,r.jsx)("div",{...(0,s.G)("repo-select-panel"),children:(0,r.jsxs)(l.X,{width:"large",maxHeight:"xlarge",onCancel:()=>{(0,u.flushSync)(()=>t(!1)),h.current?.focus(),(0,i.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},onSubmit:()=>{(0,u.flushSync)(()=>t(!1)),n.current?.focus()},open:e,variant:"modal",selectionVariant:j,title:"multiple"===j?"Select repositories":"Select a repository",description:b,children:[(0,r.jsx)(l.X.Header,{className:(0,c.$)(M.length>0&&"border-bottom-0"),children:(0,r.jsx)(l.X.SearchInput,{loading:L&&!S||B,onChange:e=>{_(e.currentTarget.value)},placeholder:"Search repositories","aria-label":"Search repositories"})}),(0,r.jsx)(a.x,{portalContainerName:y.f1,protectedOrgs:M,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${location.href}`,isDisplayedInSelectPanel:!0}),(0,r.jsx)(y.hl,{}),I&&(0,r.jsx)(l.X.Message,{variant:"error",size:"inline",children:I}),(0,r.jsxs)(o.l,{sx:{minHeight:340},children:[(0,r.jsx)("div",{role:"status",className:"sr-only",children:D}),L&&S?(0,r.jsx)(l.X.Loading,{children:"Fetching repositories\u2026"}):0!==T.length||L?(0,r.jsxs)(r.Fragment,{children:[P?.map(e=>r.jsx(v.W,{repo:e,onSelect:U,selected:f.has(e.databaseId)},e.databaseId)),P&&O&&(0,r.jsx)(o.l.Divider,{}),O?.map(e=>r.jsx(v.W,{repo:e,onSelect:U,selected:f.has(e.databaseId)},e.databaseId))]}):(0,r.jsx)(l.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})]})]})})}try{w.displayName||(w.displayName="RepoTopicSelectPanel")}catch{}try{j.displayName||(j.displayName="RepoReferencesSelectPanel")}catch{}try{b.displayName||(b.displayName="RepoSelectPanel")}catch{}},59010:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(74848),i=n(62456),a=n(8338);function s({onSelect:e,repo:t,selected:n,trailingVisualComponent:s}){let{databaseId:o,isInOrganization:l,nwo:c,ownerAvatarUrl:d}=t;return(0,r.jsxs)(a.l.Item,{onSelect:()=>e(o),selected:n,children:[(0,r.jsx)(a.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:d,square:l,size:16})}),c,s&&(0,r.jsx)(a.l.TrailingVisual,{children:s})]},c)}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},12649:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(74848),i=n(2676);let a={version:"VersionName-module__version--DI4zD"};function s({"data-testid":e,version:t}){return(0,r.jsxs)(i.A,{className:a.version,as:"span","data-testid":e,children:["v",t]})}try{s.displayName||(s.displayName="VersionName")}catch{}},90591:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848);function i({className:e,...t}){return(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,...t,children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})})]})}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},16184:(e,t,n)=>{n.d(t,{O:()=>R});var r=n(74848),i=n(38621),a=n(75177),s=n(84217),o=n(87330),l=n(55847),c=n(8338),d=n(63867),u=n(30729),m=n(96540);function p({children:e}){return(0,r.jsx)(a.A,{sx:{overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},children:(0,r.jsx)(a.A,{sx:{overflow:"hidden",backgroundColor:"canvas.default"},children:(0,r.jsx)(a.A,{sx:{display:"flex",flexDirection:"column"},children:e})})})}function h({children:e,onDismiss:t}){return(0,r.jsxs)(s.A,{as:"h3",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},children:[(0,r.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},children:e}),t&&(0,r.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:t,variant:"invisible",sx:{flexShrink:0}})]})}function f({children:e}){return(0,r.jsx)(a.A,{sx:{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},children:e})}function g({children:e,title:t,initiallyOpen:n}){let[a,s]=(0,m.useState)(n??!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Q,{onClick:()=>s(e=>!e),sx:{borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},children:[(0,r.jsx)(u.A,{icon:a?i.ChevronDownIcon:i.ChevronRightIcon,sx:{mr:2}}),t]}),a&&e]})}function x({children:e}){return(0,r.jsx)(a.A,{sx:{padding:3},children:e})}function y({direction:e,onExpand:t}){return(0,r.jsx)(l.Q,{onClick:t,sx:{borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':{justifyContent:"start"},..."above"===e?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},children:(0,r.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(u.A,{icon:"below"===e?i.FoldDownIcon:i.FoldUpIcon,sx:{mr:2}}),"Show content ",e]})})}function v({children:e}){return(0,r.jsx)(c.l,{children:(0,r.jsxs)(c.l.Group,{children:[(0,r.jsx)(c.l.GroupHeading,{as:"h3",children:"Reference details"}),e]})})}function w({children:e,href:t,icon:n}){return(0,r.jsxs)(c.l.LinkItem,{href:t,children:[(0,r.jsx)(c.l.LeadingVisual,{children:(0,r.jsx)(u.A,{icon:n})}),e]})}function j(){return(0,r.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},children:[(0,r.jsx)(d.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]})}function b(){return(0,r.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,r.jsx)(a.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})})}function I({children:e,detailsError:t,detailsLoading:n}){return t?(0,r.jsx)(b,{}):n?(0,r.jsx)(j,{}):(0,r.jsx)(r.Fragment,{children:e})}let R={Frame:p,Header:h,Body:I,Content:x,CollapsibleSubsection:g,ContentExpander:y,Details:v,DetailLink:w,SectionDivider:f};try{p.displayName||(p.displayName="Frame")}catch{}try{h.displayName||(h.displayName="Header")}catch{}try{f.displayName||(f.displayName="SectionDivider")}catch{}try{g.displayName||(g.displayName="CollapsibleSubsection")}catch{}try{x.displayName||(x.displayName="Content")}catch{}try{y.displayName||(y.displayName="ContentExpander")}catch{}try{v.displayName||(v.displayName="Details")}catch{}try{w.displayName||(w.displayName="DetailLink")}catch{}try{j.displayName||(j.displayName="Loading")}catch{}try{b.displayName||(b.displayName="Error")}catch{}try{I.displayName||(I.displayName="Body")}catch{}},91295:(e,t,n)=>{n.d(t,{_:()=>d,I:()=>c});var r=n(74848),i=n(75177),a=n(52464),s=n(34614),o=n(16184);let l={"bing-icon":"WebSearchReferencePreview-module__bing-icon--kFZ4I"};function c({reference:e,onDismiss:t}){return(0,r.jsxs)(o.O.Frame,{children:[(0,r.jsx)(o.O.Header,{onDismiss:t,children:(0,r.jsxs)(i.A,{sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(d,{}),(0,r.jsxs)(a.A,{sx:{fontSize:0,fontWeight:400,color:"fg.muted"},children:[(0,r.jsxs)(a.A,{sx:{fontSize:1,fontWeight:600,color:"fg.default"},children:[e.results.length," ",1===e.results.length?" result ":" results "]}),"from Bing search."]})]})}),(0,r.jsx)(o.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",px:3,gap:3,pb:3},children:[e.results.map((e,t)=>(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(s.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)),(0,r.jsx)(a.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(s.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})})]})})]})}let d=()=>(0,r.jsx)("div",{className:l["bing-icon"]});try{c.displayName||(c.displayName="WebSearchReferencePreview")}catch{}try{d.displayName||(d.displayName="BingIcon")}catch{}},61663:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>h,nn:()=>f,lm:()=>m});var r=n(74848),i=n(96540);let a=null,s=null,o=new Set;function l(e){return o.add(e),a||(a=new ResizeObserver(()=>{s||(s=requestAnimationFrame(()=>{for(let e of(s=null,o))e()}))})).observe(document.documentElement),()=>{o.delete(e),0===o.size&&a&&(a.disconnect(),a=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=i.createContext({screenSize:c.small});function m(){return i.useContext(u)}function p(){return f(window.innerWidth)}function h({children:e,initialValue:t=c.small}){let n=(0,i.useSyncExternalStore)(l,p,(0,i.useCallback)(()=>t,[t])),a=(0,i.useMemo)(()=>({screenSize:n}),[n]);return(0,r.jsx)(u.Provider,{value:a,children:e})}function f(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{h.displayName||(h.displayName="ScreenSizeProvider")}catch{}},70642:(e,t,n)=>{n.d(t,{x:()=>m});var r=n(74848),i=n(38621),a=n(75177),s=n(65481),o=n(34614),l=n(89323),c=n(8338),d=n(30729),u=n(47767);function m({portalContainerName:e,protectedOrgs:t,redirectURI:n,isDisplayedInSelectPanel:l,sx:c}){let m=(0,u.zy)();if(!t||0===t.length)return null;let f=(0,r.jsx)("b",{children:t.slice(0,3).join(", ")});return 2===t.length&&(f=(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:t[0]})," and ",(0,r.jsx)("b",{children:t[1]})]})),3===t.length&&(f=(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:t.slice(0,2).join(", ")}),", and ",(0,r.jsx)("b",{children:t[2]})]})),(0,r.jsx)(a.A,{sx:c,"data-testid":"sso-banner",children:(0,r.jsx)(a.A,{sx:{fontSize:1},children:(0,r.jsx)("section",{"aria-label":"Single sign on information",children:(0,r.jsx)(s.A,{sx:{p:3,borderRadius:l?0:2,borderWidth:l?"1px 0":1,borderStyle:"solid",borderColor:"accent.muted",fontSize:1},children:1===t.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(d.A,{icon:i.ShieldLockIcon}),(0,r.jsx)(o.A,{inline:!0,href:`/orgs/${t[0]}/sso?return_to=${h({location:m,redirectURI:n})}`,children:"Single sign-on"}),"\xa0to see results in the ",(0,r.jsx)("b",{children:t[0]})," organization."]}):(0,r.jsxs)(a.A,{sx:{display:"flex",alignItems:"baseline",gap:2,"& svg":{marginRight:"0 !important"}},children:[(0,r.jsx)(d.A,{sx:{position:"relative",top:"3px"},icon:i.ShieldLockIcon}),(0,r.jsxs)(a.A,{sx:{display:"flex",alignItems:"baseline",gap:[0,2],flexWrap:["wrap","nowrap"],flexGrow:1},children:[(0,r.jsxs)(a.A,{as:"p",sx:{marginBottom:0,flexGrow:1},children:["Single sign on to see results in the ",f," ",t.length>3?`and ${t.length-3} other `:"",t.length>1?"organizations":"organization","."]}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(p,{portalContainerName:e,protectedOrgs:t,redirectURI:n})})]})]})})})})})}function p({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let i=(0,u.zy)();return(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${e}/sso?return_to=${h({location:i,redirectURI:n})}`,children:e},`org-${e}`))})})]})}function h({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{m.displayName||(m.displayName="SingleSignOnBanner")}catch{}try{p.displayName||(p.displayName="SingleSignOnButton")}catch{}}}]);
//# sourceMappingURL=ui_packages_copilot-chat_components_ChatInput_tsx-ui_packages_copilot-chat_components_LegalDi-cbec1d-34467284fce7.js.map